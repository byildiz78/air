(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9904],{5254:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/TakeawayPage",function(){return n(2543)}])},17335:function(e,t,n){"use strict";var s=n(85893);n(67294);var o=n(45077),i=n(41635),r=n(39332);t.Z=e=>{let{tableId:t,title:n="RobotPOS",onBarcodeSubmit:a}=e,c=(0,r.usePathname)(),l=null==c?void 0:c.startsWith("/kitchen-display"),u=null==c?void 0:c.startsWith("/delivery-status");return l||u?null:(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm p-4",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center text-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:n}),t&&(0,s.jsxs)("span",{className:"text-lg",children:["Masa ",t]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{size:18,className:"text-blue-500"}),(0,s.jsx)("span",{children:new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsx)("div",{className:"ml-4",children:(0,s.jsx)(i.Z,{onSubmit:null!=a?a:()=>{}})})]})]})})}},2543:function(e,t,n){"use strict";n.r(t);var s=n(85893),o=n(67294),i=n(39332),r=n(73166),a=n(17335),c=n(69821),l=n(88003),u=n(84254),d=n(53512),m=n(85022),p=n(71195);t.default=()=>{let e=(0,i.useRouter)(),[t,n]=(0,o.useState)(1),[x,h]=(0,o.useState)(r.b[0]),[f,b]=(0,o.useState)([]),[g,v]=(0,o.useState)([]),[C,j]=(0,o.useState)(null),[S,y]=(0,o.useState)(!1),[N,P]=(0,o.useState)(!1),[O,w]=(0,o.useState)(!1),[I,k]=(0,o.useState)(!1),[_,D]=(0,o.useState)(""),[Z,q]=(0,o.useState)(!1),[T,E]=(0,o.useState)(null),A=e=>{for(let t of r.b){let n=t.products.find(t=>t.barcode===e);if(n)return n}return null},R=r.b.filter(e=>e.page===t),W=e=>{if(e.isCombo&&e.comboOptions){E(e),q(!0);return}b(t=>t.find(t=>t.productId===e.id)?t.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...t,{productId:e.id,name:e.name,price:e.price,quantity:1}]),j(e.id)};return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-900/70",children:[(0,s.jsx)(a.Z,{title:"Paket Sipariş"}),(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsx)(u.Z,{currentPage:t,currentCategories:R,selectedCategory:x,onPageChange:n,onCategorySelect:h,onCancel:()=>e.push("/")}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(c.Z,{products:x.products,selectedProduct:C,orderItems:f,onProductSelect:W}),(0,s.jsx)(d.Z,{onCheckDiscount:()=>P(!0),onProductDiscount:()=>w(!0),onCustomerName:()=>k(!0),onOtherOptions:()=>y(!0),showTableActions:!1})]}),(0,s.jsx)(l.Z,{orderItems:f,payments:g,onIncrement:e=>{let t=x.products.find(t=>t.id===e);t&&W(t)},onDecrement:e=>{b(t=>{let n=t.find(t=>t.productId===e);return n&&n.quantity>1?t.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.productId!==e)})},onPayment:(e,t)=>{let n={type:e,amount:t,timestamp:new Date().toISOString()};v(e=>[...e,n])},tableId:"",onBarcodeSubmit:e=>{let t=A(e);t?W(t):console.log("\xdcr\xfcn bulunamadı:",e)}}),(0,s.jsx)(m.Z,{isOtherOptionsOpen:S,isCheckDiscountOpen:N,isProductDiscountOpen:O,isCustomerNameOpen:I,onOtherOptionsClose:()=>y(!1),onCheckDiscountClose:()=>P(!1),onProductDiscountClose:()=>w(!1),onCustomerNameClose:()=>k(!1),onCheckDiscount:e=>{console.log("Applying check discount:",e)},onProductDiscount:e=>{console.log("Applying product discount:",e)},onCustomerName:e=>{D(e)}}),T&&(0,s.jsx)(p.Z,{isOpen:Z,onClose:()=>{q(!1),E(null)},comboOptions:T.comboOptions,onComplete:e=>{var t,n,s;if(!T)return;let o=((null===(t=e.mainItem)||void 0===t?void 0:t.extraPrice)||0)+((null===(n=e.side)||void 0===n?void 0:n.extraPrice)||0)+((null===(s=e.drink)||void 0===s?void 0:s.extraPrice)||0),i=e.mainItem?" (".concat(e.mainItem.name,")"):"",r="".concat(T.name).concat(i);b(t=>[...t,{productId:T.id,name:r,price:T.price+o,quantity:e.quantity||1,comboSelections:e}]),E(null),q(!1)},selectedComboProduct:T})]})]})}}},function(e){e.O(0,[4321,7669,9266,3555,2888,9774,179],function(){return e(e.s=5254)}),_N_E=e.O()}]);