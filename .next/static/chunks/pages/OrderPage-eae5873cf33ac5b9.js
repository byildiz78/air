(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4284],{76172:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/OrderPage",function(){return n(89558)}])},89558:function(e,t,n){"use strict";n.r(t);var o=n(85893),u=n(67294),r=n(39332),s=n(69821),c=n(83932),i=n(53512),a=n(44939),d=n(71195),l=n(73166),m=n(84254);t.default=e=>{let{tableId:t}=e,n=(0,r.useRouter)(),[p,f]=(0,u.useState)(1),[C,h]=(0,u.useState)(l.b[0]),[S,b]=(0,u.useState)([]),[O,I]=(0,u.useState)([]),[P,x]=(0,u.useState)(null),[y,g]=(0,u.useState)(!1),[D,_]=(0,u.useState)(!1),[k,N]=(0,u.useState)(!1),[w,j]=(0,u.useState)(!1),[q,Z]=(0,u.useState)(""),[E,T]=(0,u.useState)(!1),[v,A]=(0,u.useState)(null),[B,R]=(0,u.useState)(0),[X,z]=(0,u.useState)(0),L=e=>{for(let t of l.b){let n=t.products.find(t=>t.barcode===e);if(n)return n}return null},Y=l.b.filter(e=>e.page===p),F=e=>{if(e.isCombo&&e.comboOptions){A(e),T(!0);return}let t=new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});b(n=>n.find(t=>t.productId===e.id)?n.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...n,{productId:e.id,name:e.name,price:e.price,quantity:1,addedAt:t,addedBy:"Ahmet Yılmaz"}]),x(e.id)};return(0,o.jsxs)("div",{className:"flex h-screen",children:[(0,o.jsx)(m.Z,{currentPage:p,currentCategories:Y,selectedCategory:C,onPageChange:f,onCategorySelect:h,onCancel:()=>n.push("/table-layout")}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,o.jsx)(s.Z,{products:C.products,selectedProduct:P,orderItems:S,onProductSelect:F}),(0,o.jsx)(i.Z,{onCheckDiscount:()=>_(!0),onProductDiscount:()=>N(!0),onCustomerName:()=>j(!0),onOtherOptions:()=>g(!0),showTableActions:!1,selectedProductId:P,hasProductInCart:!!(P&&S.some(e=>e.productId===P))})]}),(0,o.jsx)(c.Z,{orderItems:S,payments:O,onIncrement:e=>{let t;for(let n of l.b){let o=n.products.find(t=>t.id===e);if(o){t=o;break}}t&&F(t)},onDecrement:e=>{b(t=>{let n=t.find(t=>t.productId===e);return n&&n.quantity>1?t.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.productId!==e)})},onPayment:(e,t)=>{I(n=>[...n,{type:e,amount:t,timestamp:new Date().toISOString()}])},tableId:t||"",onBarcodeSubmit:e=>{let t=L(e);t?F(t):console.log("\xdcr\xfcn bulunamadı:",e)},checkDiscount:B,productDiscount:X}),(0,o.jsx)(a.Z,{isOtherOptionsOpen:y,isCheckDiscountOpen:D,isProductDiscountOpen:k,isCustomerNameOpen:w,onOtherOptionsClose:()=>g(!1),onCheckDiscountClose:()=>_(!1),onProductDiscountClose:()=>N(!1),onCustomerNameClose:()=>j(!1),onCheckDiscount:e=>{R(e),_(!1)},onProductDiscount:e=>{z(e),N(!1)},onCustomerName:e=>{Z(e)}}),v&&(0,o.jsx)(d.Z,{isOpen:E,onClose:()=>{T(!1),A(null)},comboOptions:v.comboOptions,onComplete:e=>{if(!v)return;let t=(e.mainItem.extraPrice||0)+(e.side.extraPrice||0)+(e.drink.extraPrice||0),n="".concat(v.name," (").concat(e.mainItem.name,")");b(o=>[...o,{productId:v.id,name:n,price:v.price+t,quantity:1,comboSelections:e}]),A(null),T(!1)}})]})}}},function(e){e.O(0,[4321,3207,6734,9560,2888,9774,179],function(){return e(e.s=76172)}),_N_E=e.O()}]);