(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4284],{6172:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/OrderPage",function(){return n(9558)}])},9558:function(e,t,n){"use strict";n.r(t);var o=n(5893),u=n(7294),i=n(9332),r=n(9821),s=n(919),c=n(3512),a=n(8634),d=n(1195),l=n(438),m=n(4254);t.default=e=>{let{tableId:t}=e,n=(0,i.useRouter)(),[p,f]=(0,u.useState)(1),[h,C]=(0,u.useState)(l.b[0]),[g,S]=(0,u.useState)([]),[b,y]=(0,u.useState)([]),[O,x]=(0,u.useState)(null),[P,I]=(0,u.useState)(!1),[_,D]=(0,u.useState)(!1),[N,k]=(0,u.useState)(!1),[w,j]=(0,u.useState)(!1),[q,T]=(0,u.useState)(""),[Z,A]=(0,u.useState)(!1),[E,v]=(0,u.useState)(null),R=e=>{for(let t of l.b){let n=t.products.find(t=>t.barcode===e);if(n)return n}return null},B=l.b.filter(e=>e.page===p),L=e=>{if(e.isCombo&&e.comboOptions){v(e),A(!0);return}let t=new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});S(n=>n.find(t=>t.productId===e.id)?n.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...n,{productId:e.id,name:e.name,price:e.price,quantity:1,addedAt:t,addedBy:"Ahmet Yılmaz"}]),x(e.id)};return(0,o.jsxs)("div",{className:"flex h-screen",children:[(0,o.jsx)(m.Z,{currentPage:p,currentCategories:B,selectedCategory:h,onPageChange:f,onCategorySelect:C,onCancel:()=>n.push("/table-layout")}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,o.jsx)(r.Z,{products:h.products,selectedProduct:O,orderItems:g,onProductSelect:L}),(0,o.jsx)(c.Z,{onCheckDiscount:()=>D(!0),onProductDiscount:()=>k(!0),onCustomerName:()=>j(!0),onOtherOptions:()=>I(!0),showTableActions:!1})]}),(0,o.jsx)(s.Z,{orderItems:g,payments:b,onIncrement:e=>{let t=h.products.find(t=>t.id===e);t&&L(t)},onDecrement:e=>{S(t=>{let n=t.find(t=>t.productId===e);return n&&n.quantity>1?t.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.productId!==e)})},onPayment:(e,t)=>{let o={type:e,amount:t,timestamp:new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})};y(e=>[...e,o]),[...b,o].reduce((e,t)=>e+t.amount,0)>=g.reduce((e,t)=>e+t.price*t.quantity,0)&&n.push("/table-layout")},tableId:t||"",onBarcodeSubmit:e=>{let t=R(e);t?L(t):console.log("\xdcr\xfcn bulunamadı:",e)}}),(0,o.jsx)(a.Z,{isOtherOptionsOpen:P,isCheckDiscountOpen:_,isProductDiscountOpen:N,isCustomerNameOpen:w,onOtherOptionsClose:()=>I(!1),onCheckDiscountClose:()=>D(!1),onProductDiscountClose:()=>k(!1),onCustomerNameClose:()=>j(!1),onCheckDiscount:e=>{console.log("Applying check discount:",e)},onProductDiscount:e=>{console.log("Applying product discount:",e)},onCustomerName:e=>{T(e)}}),E&&(0,o.jsx)(d.Z,{isOpen:Z,onClose:()=>{A(!1),v(null)},comboOptions:E.comboOptions,onComplete:e=>{if(!E)return;let t=(e.mainItem.extraPrice||0)+(e.side.extraPrice||0)+(e.drink.extraPrice||0),n="".concat(E.name," (").concat(e.mainItem.name,")");S(o=>[...o,{productId:E.id,name:n,price:E.price+t,quantity:1,comboSelections:e}]),v(null),A(!1)}})]})}}},function(e){e.O(0,[7669,3310,8154,2888,9774,179],function(){return e(e.s=6172)}),_N_E=e.O()}]);