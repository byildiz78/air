"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2961],{45518:function(e,t,s){var n=s(3827);s(64090);var o=s(26490),i=s(76992),a=s(47907);t.Z=e=>{let{tableId:t,title:s="RobotPOS",onBarcodeSubmit:r}=e,c=(0,a.usePathname)(),l=null==c?void 0:c.startsWith("/kitchen-display"),u=null==c?void 0:c.startsWith("/delivery-status");return l||u?null:(0,n.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm p-4",children:(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center text-gray-800",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("h1",{className:"text-xl font-bold",children:s}),t&&(0,n.jsxs)("span",{className:"text-lg",children:["Masa ",t]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.Z,{size:18,className:"text-blue-500"}),(0,n.jsx)("span",{children:new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]}),(0,n.jsx)("div",{className:"ml-4",children:(0,n.jsx)(i.Z,{onSubmit:null!=r?r:()=>{}})})]})]})})}},42961:function(e,t,s){s.r(t);var n=s(3827),o=s(64090),i=s(47907),a=s(35450),r=s(45518),c=s(59684),l=s(35471),u=s(33258),d=s(33151),m=s(70362),p=s(23955);t.default=()=>{let e=(0,i.useRouter)(),[t,s]=(0,o.useState)(1),[x,h]=(0,o.useState)(a.b[0]),[f,b]=(0,o.useState)([]),[v,g]=(0,o.useState)([]),[C,j]=(0,o.useState)(null),[S,y]=(0,o.useState)(!1),[N,O]=(0,o.useState)(!1),[P,I]=(0,o.useState)(!1),[k,D]=(0,o.useState)(!1),[w,Z]=(0,o.useState)(""),[q,_]=(0,o.useState)(!1),[A,R]=(0,o.useState)(null),T=e=>{for(let t of a.b){let s=t.products.find(t=>t.barcode===e);if(s)return s}return null},E=a.b.filter(e=>e.page===t),W=e=>{if(e.isCombo&&e.comboOptions){R(e),_(!0);return}b(t=>t.find(t=>t.productId===e.id)?t.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...t,{productId:e.id,name:e.name,price:e.price,quantity:1}]),j(e.id)};return(0,n.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-900/70",children:[(0,n.jsx)(r.Z,{title:"Paket Sipariş"}),(0,n.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,n.jsx)(u.Z,{currentPage:t,currentCategories:E,selectedCategory:x,onPageChange:s,onCategorySelect:h,onCancel:()=>e.push("/")}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,n.jsx)(c.Z,{products:x.products,selectedProduct:C,orderItems:f,onProductSelect:W}),(0,n.jsx)(d.Z,{onCheckDiscount:()=>O(!0),onProductDiscount:()=>I(!0),onCustomerName:()=>D(!0),onOtherOptions:()=>y(!0),showTableActions:!1})]}),(0,n.jsx)(l.Z,{orderItems:f,payments:v,onIncrement:e=>{let t=x.products.find(t=>t.id===e);t&&W(t)},onDecrement:e=>{b(t=>{let s=t.find(t=>t.productId===e);return s&&s.quantity>1?t.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.productId!==e)})},onPayment:(e,t)=>{let s={type:e,amount:t,timestamp:new Date().toISOString()};g(e=>[...e,s])},tableId:"",onBarcodeSubmit:e=>{let t=T(e);t?W(t):console.log("\xdcr\xfcn bulunamadı:",e)}}),(0,n.jsx)(m.Z,{isOtherOptionsOpen:S,isCheckDiscountOpen:N,isProductDiscountOpen:P,isCustomerNameOpen:k,onOtherOptionsClose:()=>y(!1),onCheckDiscountClose:()=>O(!1),onProductDiscountClose:()=>I(!1),onCustomerNameClose:()=>D(!1),onCheckDiscount:e=>{console.log("Applying check discount:",e)},onProductDiscount:e=>{console.log("Applying product discount:",e)},onCustomerName:e=>{Z(e)}}),A&&(0,n.jsx)(p.Z,{isOpen:q,onClose:()=>{_(!1),R(null)},comboOptions:A.comboOptions,onComplete:e=>{var t,s,n;if(!A)return;let o=((null===(t=e.mainItem)||void 0===t?void 0:t.extraPrice)||0)+((null===(s=e.side)||void 0===s?void 0:s.extraPrice)||0)+((null===(n=e.drink)||void 0===n?void 0:n.extraPrice)||0),i=e.mainItem?" (".concat(e.mainItem.name,")"):"",a="".concat(A.name).concat(i);b(t=>[...t,{productId:A.id,name:a,price:A.price+o,quantity:e.quantity||1,comboSelections:e}]),R(null),_(!1)},selectedComboProduct:A})]})]})}}}]);