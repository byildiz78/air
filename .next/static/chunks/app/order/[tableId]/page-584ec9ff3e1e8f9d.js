(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7737],{65245:function(e,t,s){Promise.resolve().then(s.bind(s,88078))},30438:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(87461).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},63915:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(87461).Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]])},50489:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(87461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},88078:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var r=s(3827),l=s(64090),n=s(47907),i=s(59684),a=s(25534),o=s(33151),c=s(70362),d=s(23955),u=s(52235),x=s(50489),m=s(53879),h=s(18025),b=s(63915),g=s(10527),p=s(70094),f=e=>{let{isOpen:t,onClose:s,orderItems:n,onSplitComplete:i}=e,[a,o]=(0,l.useState)([[...n],[]]),c=e=>{if(0===e||a.length<=2)return;let t=[...a[e]],s=a.filter((t,s)=>s!==e);s[0]=[...s[0],...t],o(s)},d=(e,t,s)=>{let r=a[t].findIndex(t=>t.productId===e);if(-1===r)return;let l=a[t][r];if(l.quantity>1){let n={...l,quantity:1},i={...l,quantity:l.quantity-1},c=[...a];c[t]=[...c[t].slice(0,r),i,...c[t].slice(r+1)];let d=c[s].findIndex(t=>t.productId===e);-1!==d?c[s]=[...c[s].slice(0,d),{...c[s][d],quantity:c[s][d].quantity+1},...c[s].slice(d+1)]:c[s]=[...c[s],n],o(c)}else{let r=[...a];r[t]=r[t].filter(t=>t.productId!==e);let n=r[s].findIndex(t=>t.productId===e);-1!==n?r[s]=[...r[s].slice(0,n),{...r[s][n],quantity:r[s][n].quantity+1},...r[s].slice(n+1)]:r[s]=[...r[s],l],o(r)}},f=e=>e.reduce((e,t)=>e+t.price*t.quantity,0),y=e=>{console.log("\xc7ek ".concat(e," i\xe7in hesap yazdırılıyor..."))},j=e=>{console.log("\xc7ek ".concat(e," i\xe7in \xf6deme alınıyor..."))};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 overflow-hidden",children:(0,r.jsxs)("div",{className:"bg-gray-100 w-full h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-300 bg-white shadow-sm",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Siparişi B\xf6l"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:(0,r.jsxs)("span",{children:["Toplam \xc7ek: ",a.filter(e=>e.length>0).length]})}),(0,r.jsx)("button",{onClick:s,className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition-colors",children:(0,r.jsx)(u.Z,{size:24})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto p-3 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[a.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col w-[300px] h-[calc(100vh-180px)] bg-white rounded-lg border border-gray-300 overflow-hidden shadow-sm",children:[(0,r.jsxs)("div",{className:"p-3 bg-blue-50 text-gray-800 font-bold flex justify-between items-center border-b border-gray-300",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{children:0===t?"Orijinal \xc7ek":"Yeni \xc7ek ".concat(t)}),(0,r.jsxs)("span",{className:"ml-2 bg-blue-100 px-2 py-0.5 rounded-full text-xs text-blue-800",children:[e.length," \xfcr\xfcn"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"bg-blue-100 px-2 py-0.5 rounded-full text-xs text-blue-800",children:[f(e).toFixed(2)," ₺"]}),t>0&&a.length>2&&(0,r.jsx)("button",{onClick:()=>c(t),className:"p-1 text-red-500 hover:bg-red-50 rounded-full",children:(0,r.jsx)(x.Z,{size:16})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto p-2 bg-white",children:0===e.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[(0,r.jsx)("div",{className:"text-3xl mb-2 opacity-30",children:"\uD83E\uDDFE"}),(0,r.jsx)("div",{className:"text-sm",children:"Bu \xe7ek boş"})]}):(0,r.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded-lg border border-gray-300 hover:border-blue-400 cursor-pointer group transition-all hover:scale-[1.02] hover:shadow-md",onClick:()=>{0===t&&a.length>1&&d(e.productId,0,1)},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-6 h-6 flex items-center justify-center bg-blue-100 rounded-full text-xs font-bold text-blue-800",children:e.quantity}),(0,r.jsx)("span",{className:"font-medium text-gray-800 text-sm truncate max-w-[140px]",children:e.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-800 text-xs",children:(e.price*e.quantity).toFixed(2)}),(0,r.jsxs)("div",{className:"flex",children:[t>0&&(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),d(e.productId,t,t-1)},className:"p-1.5 rounded-full ml-1 text-green-600 bg-green-100",title:"\xd6nceki \xc7eke Taşı",children:(0,r.jsx)(m.Z,{size:20})}),t<a.length-1&&(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),d(e.productId,t,t+1)},className:"p-1.5 rounded-full ml-1 text-blue-600 bg-blue-100",title:"Sonraki \xc7eke Taşı",children:(0,r.jsx)(h.Z,{size:20})})]})]})]},e.productId))})}),e.length>0&&(0,r.jsxs)("div",{className:"p-2 border-t border-gray-300 bg-gray-50 flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>y(t),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded transition-colors",children:[(0,r.jsx)(b.Z,{size:14}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Hesap Yazdır"})]}),(0,r.jsxs)("button",{onClick:()=>j(t),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",children:[(0,r.jsx)(g.Z,{size:14}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"\xd6deme Al"})]})]})]},t)),(0,r.jsx)("div",{className:"flex items-center justify-center w-[300px] h-[calc(100vh-180px)] bg-white/50 rounded-lg border border-gray-300 border-dashed",children:(0,r.jsxs)("button",{onClick:()=>{o([...a,[]])},className:"flex flex-col items-center justify-center p-4 rounded-lg bg-white hover:bg-gray-100 text-gray-600 hover:text-gray-800 transition-colors shadow-sm",children:[(0,r.jsx)(p.Z,{size:32,className:"mb-2"}),(0,r.jsx)("span",{children:"Yeni \xc7ek Ekle"})]})})]})}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-300 flex justify-between items-center bg-white",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:(0,r.jsx)("span",{children:"\xdcr\xfcnlere tıklayarak \xe7ekler arasında taşıyabilirsiniz"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:s,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"İptal"}),(0,r.jsx)("button",{onClick:()=>{i(a.filter(e=>e.length>0)),s()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"B\xf6lmeyi Tamamla"})]})]})]})}):null},y=s(26490),j=s(30438),v=s(33571),N=s(80037),k=s(25302),w=e=>{let{isOpen:t,onClose:s,initialNote:n,onSave:i}=e,[a,o]=(0,l.useState)(n),c=[{text:"Misafirin acelesi var",icon:(0,r.jsx)(y.Z,{size:16,className:"text-red-500"})},{text:"Ayrı servis isteniyor",icon:(0,r.jsx)(j.Z,{size:16,className:"text-blue-500"})},{text:"İ\xe7ecekler \xf6nce gelsin",icon:(0,r.jsx)(v.Z,{size:16,className:"text-amber-500"})},{text:"\xd6zel g\xfcn kutlaması",icon:(0,r.jsx)(N.Z,{size:16,className:"text-green-500"})}],d=e=>{o(t=>t.trim()?"".concat(t,", ").concat(e):e)};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 overflow-hidden",children:(0,r.jsxs)("div",{className:"bg-white w-full h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-gray-200 bg-blue-50",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(j.Z,{size:20,className:"text-blue-600 mr-2"}),(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Sipariş Notu"})]}),(0,r.jsx)("button",{onClick:s,className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition-colors",children:(0,r.jsx)(u.Z,{size:20})})]}),(0,r.jsx)("div",{className:"p-2 bg-gray-50 flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{htmlFor:"orderNote",className:"text-sm font-medium text-gray-700",children:"Sipariş Notu"}),a&&(0,r.jsx)("button",{onClick:()=>{o("")},className:"text-xs text-gray-500 hover:text-red-500 px-1.5 py-0.5 rounded border border-gray-300 hover:border-red-300",children:"Temizle"})]}),(0,r.jsx)("textarea",{id:"orderNote",value:a,onChange:e=>o(e.target.value),className:"w-full h-20 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800 text-sm",placeholder:"Sipariş ile ilgili notunuzu buraya yazın..."}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-1.5 flex items-center",children:[(0,r.jsx)(y.Z,{size:16,className:"mr-1.5 text-blue-500"}),"Hızlı Notlar"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-1.5 sm:grid-cols-4",children:c.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>d(e.text),className:"flex items-center p-1.5 bg-blue-50 hover:bg-blue-100 text-blue-800 rounded text-xs transition-colors border border-blue-100 hover:border-blue-300",children:[(0,r.jsx)("div",{className:"mr-1",children:e.icon}),(0,r.jsx)("span",{className:"truncate",children:e.text})]},t))})]})]})}),(0,r.jsxs)("div",{className:"p-2 border-t border-gray-200 bg-gray-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-200 font-medium text-sm",children:"İptal"}),(0,r.jsx)("button",{onClick:()=>{i(a),s()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Kaydet"})]}),(0,r.jsx)(k.Z,{onInput:e=>o(t=>t+e),onBackspace:()=>o(e=>e.slice(0,-1))})]})]})}):null};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,s(87461).Z)("MonitorSmartphone",[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]]);var S=e=>{let{isDisplayOpen:t,setIsDisplayOpen:s}=e;return(0,r.jsxs)("button",{onClick:()=>{if(t)window.open("/customer-display","customerDisplay");else{let e=window.open("/customer-display","customerDisplay","width=1024,height=768");if(e){s(!0);let t=setInterval(()=>{e.closed&&(s(!1),clearInterval(t))},1e3)}}},className:"flex items-center gap-1.5 transition-all duration-150 ".concat(t?"bg-green-600 hover:bg-green-700 active:bg-green-800":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"," text-white py-2 px-3 rounded-lg text-sm font-medium shadow-sm"),title:"M\xfcşteri Ekranını A\xe7",children:[(0,r.jsx)(C,{size:16,className:"opacity-80"}),(0,r.jsx)("span",{className:"truncate",children:t?"M\xfcşteri Ekranı A\xe7ık":"M\xfcşteri Ekranını A\xe7"})]})},I=s(35450),z=s(33258),Z=s(8961),O=e=>{let{tableId:t}=e,s=(0,n.useRouter)(),[u,x]=(0,l.useState)(1),[m,h]=(0,l.useState)(I.b[0]),[b,g]=(0,l.useState)([]),[p,y]=(0,l.useState)([]),[j,v]=(0,l.useState)(null),[N,k]=(0,l.useState)(!1),[C,O]=(0,l.useState)(!1),[q,D]=(0,l.useState)(!1),[P,M]=(0,l.useState)(!1),[E,T]=(0,l.useState)(""),[A,_]=(0,l.useState)(!1),[B,H]=(0,l.useState)(null),[F,R]=(0,l.useState)(0),[V,Y]=(0,l.useState)(0),[L,W]=(0,l.useState)(!1),[K,U]=(0,l.useState)([]),[G,J]=(0,l.useState)(!1),[Q,X]=(0,l.useState)(""),[$,ee]=(0,l.useState)(!1),et=e=>{for(let t of I.b){let s=t.products.find(t=>t.barcode===e);if(s)return s}return null},es=e=>{let t=et(e);t?el(t):console.log("\xdcr\xfcn bulunamadı:",e)},er=I.b.filter(e=>e.page===u),el=e=>{if(e.isCombo&&e.comboOptions){H(e),_(!0);return}let t=new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});g(s=>s.find(t=>t.productId===e.id)?s.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...s,{productId:e.id,name:e.name,price:e.price,quantity:1,addedAt:t,addedBy:"Ahmet Yılmaz"}]),v(e.id)},en=e=>{g(t=>{let s=t.find(t=>t.productId===e);return s&&s.quantity>1?t.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.productId!==e)})};return(0,l.useEffect)(()=>{$&&(b.length>0?(0,Z.Nu)({type:"ORDER_UPDATE",orderItems:b,customerName:E,orderNote:Q,checkDiscount:F,productDiscount:V,total:b.reduce((e,t)=>e+t.price*t.quantity,0)-F-V}):(0,Z.Nu)({type:"SHOW_WELCOME"}))},[b,E,Q,F,V,$]),(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(z.Z,{currentPage:u,currentCategories:er,selectedCategory:m,onPageChange:x,onCategorySelect:h,onCancel:()=>s.push("/table-layout")}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-800",children:[(0,r.jsx)("h2",{className:"text-white text-lg font-medium",children:"\xdcr\xfcnler"}),(0,r.jsx)(S,{isDisplayOpen:$,setIsDisplayOpen:ee})]}),(0,r.jsx)(i.Z,{products:m.products,selectedProduct:j,orderItems:b,onProductSelect:el,onBarcodeSubmit:es})]}),(0,r.jsx)(o.Z,{onCheckDiscount:()=>O(!0),onProductDiscount:()=>D(!0),onCustomerName:()=>M(!0),onOtherOptions:()=>k(!0),onSplitOrder:()=>W(!0),onOrderNote:()=>J(!0),showTableActions:!0,selectedProductId:j,hasProductInCart:!!(j&&b.some(e=>e.productId===j))})]}),(0,r.jsx)(a.Z,{orderItems:b,payments:p||[],tableId:t||"",onIncrement:e=>{let t;for(let s of I.b){let r=s.products.find(t=>t.id===e);if(r){t=r;break}}t&&el(t)},onDecrement:e=>{en(e)},onPayment:()=>{},onBarcodeSubmit:es,customerName:E,checkDiscount:F,productDiscount:V,onCheckDiscount:()=>O(!0),orderNote:Q}),(0,r.jsx)(c.Z,{isOtherOptionsOpen:N,isCheckDiscountOpen:C,isProductDiscountOpen:q,isCustomerNameOpen:P,onOtherOptionsClose:()=>k(!1),onCheckDiscountClose:()=>O(!1),onProductDiscountClose:()=>D(!1),onCustomerNameClose:()=>M(!1),onCheckDiscount:e=>{R(e),O(!1)},onProductDiscount:e=>{Y(e),D(!1)},onCustomerName:e=>{T(e)}}),B&&(0,r.jsx)(d.Z,{isOpen:A,onClose:()=>{H(null),_(!1)},comboOptions:null==B?void 0:B.comboOptions,onComplete:e=>{var t,s,r;if(!B)return;let l=((null===(t=e.mainItem)||void 0===t?void 0:t.extraPrice)||0)+((null===(s=e.side)||void 0===s?void 0:s.extraPrice)||0)+((null===(r=e.drink)||void 0===r?void 0:r.extraPrice)||0),n=e.mainItem?" (".concat(e.mainItem.name,")"):"",i="".concat(B.name).concat(n),a={mainItem:e.mainItem,side:e.side,drink:e.drink,quantity:e.quantity};g(t=>[...t,{productId:B.id,name:i,price:B.price+l,quantity:e.quantity,comboSelections:a}]),H(null),_(!1)},selectedComboProduct:B}),L&&(0,r.jsx)(f,{isOpen:L,onClose:()=>W(!1),orderItems:b,onSplitComplete:e=>{U(e),W(!1)}}),(0,r.jsx)(w,{isOpen:G,onClose:()=>J(!1),initialNote:Q,onSave:e=>X(e)})]})};function q(e){let{params:t}=e;return(0,r.jsx)(O,{tableId:t.tableId})}}},function(e){e.O(0,[8422,5078,5184,2971,8069,1744],function(){return e(e.s=65245)}),_N_E=e.O()}]);