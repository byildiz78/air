(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7737],{65245:function(e,t,n){Promise.resolve().then(n.bind(n,19085))},19085:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n(3827),r=n(64090),u=n(47907),s=n(59684),c=n(25534),i=n(33151),a=n(70362),d=n(23955),l=n(35450),m=n(33258),p=e=>{let{tableId:t}=e,n=(0,u.useRouter)(),[p,f]=(0,r.useState)(1),[C,h]=(0,r.useState)(l.b[0]),[b,S]=(0,r.useState)([]),[I,O]=(0,r.useState)([]),[x,P]=(0,r.useState)(null),[y,D]=(0,r.useState)(!1),[g,k]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[q,Z]=(0,r.useState)(!1),[_,w]=(0,r.useState)(""),[v,A]=(0,r.useState)(!1),[E,T]=(0,r.useState)(null),[B,R]=(0,r.useState)(0),[z,L]=(0,r.useState)(0),Y=e=>{for(let t of l.b){let n=t.products.find(t=>t.barcode===e);if(n)return n}return null},F=l.b.filter(e=>e.page===p),G=e=>{if(e.isCombo&&e.comboOptions){T(e),A(!0);return}let t=new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});S(n=>n.find(t=>t.productId===e.id)?n.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...n,{productId:e.id,name:e.name,price:e.price,quantity:1,addedAt:t,addedBy:"Ahmet Yılmaz"}]),P(e.id)};return(0,o.jsxs)("div",{className:"flex h-screen",children:[(0,o.jsx)(m.Z,{currentPage:p,currentCategories:F,selectedCategory:C,onPageChange:f,onCategorySelect:h,onCancel:()=>n.push("/table-layout")}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,o.jsx)(s.Z,{products:C.products,selectedProduct:x,orderItems:b,onProductSelect:G}),(0,o.jsx)(i.Z,{onCheckDiscount:()=>k(!0),onProductDiscount:()=>N(!0),onCustomerName:()=>Z(!0),onOtherOptions:()=>D(!0),showTableActions:!1,selectedProductId:x,hasProductInCart:!!(x&&b.some(e=>e.productId===x))})]}),(0,o.jsx)(c.Z,{orderItems:b,payments:I,onIncrement:e=>{let t;for(let n of l.b){let o=n.products.find(t=>t.id===e);if(o){t=o;break}}t&&G(t)},onDecrement:e=>{S(t=>{let n=t.find(t=>t.productId===e);return n&&n.quantity>1?t.map(t=>t.productId===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.productId!==e)})},onPayment:(e,t)=>{O(n=>[...n,{type:e,amount:t,timestamp:new Date().toISOString()}])},tableId:t||"",onBarcodeSubmit:e=>{let t=Y(e);t?G(t):console.log("\xdcr\xfcn bulunamadı:",e)},checkDiscount:B,productDiscount:z}),(0,o.jsx)(a.Z,{isOtherOptionsOpen:y,isCheckDiscountOpen:g,isProductDiscountOpen:j,isCustomerNameOpen:q,onOtherOptionsClose:()=>D(!1),onCheckDiscountClose:()=>k(!1),onProductDiscountClose:()=>N(!1),onCustomerNameClose:()=>Z(!1),onCheckDiscount:e=>{R(e),k(!1)},onProductDiscount:e=>{L(e),N(!1)},onCustomerName:e=>{w(e)}}),E&&(0,o.jsx)(d.Z,{isOpen:v,onClose:()=>{A(!1),T(null)},comboOptions:E.comboOptions,onComplete:e=>{if(!E)return;let t=(e.mainItem.extraPrice||0)+(e.side.extraPrice||0)+(e.drink.extraPrice||0),n="".concat(E.name," (").concat(e.mainItem.name,")");S(o=>[...o,{productId:E.id,name:n,price:E.price+t,quantity:1,comboSelections:e}]),T(null),A(!1)}})]})};function f(e){let{params:t}=e;return(0,o.jsx)(p,{tableId:t.tableId})}}},function(e){e.O(0,[8422,9512,5184,2971,8069,1744],function(){return e(e.s=65245)}),_N_E=e.O()}]);