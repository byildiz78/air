(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3167],{9849:function(e,t,r){Promise.resolve().then(r.bind(r,4966))},4966:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(3827),a=r(4090),l=r(2335),n=r(5178),i=r(7326),c=e=>{let{onChange:t,sidebarGroups:r=[],items:l=[]}=e,[n,c]=(0,a.useState)({}),[o,d]=(0,a.useState)(0===l.length),[u,h]=(0,a.useState)(""),[x,m]=(0,a.useState)(r);(0,a.useEffect)(()=>{if(l.length>0){d(!1);return}(async()=>{try{let e=await fetch("/user_security_settings.json"),t=await e.json(),s={},a=new Set;if(t.forEach(e=>{let t=e.GroupName;a.add(t),s[t]||(s[t]=[]),s[t].push(e)}),c(s),0===r.length){let e=Array.from(a);m(e),e.length>0&&!u&&h(e[0])}else!u&&r.length>0&&h(r[0]);d(!1)}catch(e){console.error("Error loading security settings:",e),d(!1)}})()},[u,r,l]);let g=e=>e<=3?"bg-green-500":e<=6?"bg-yellow-500":"bg-red-500",y=e=>e<=3?"text-green-600":e<=6?"text-yellow-600":"text-red-600",b=e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full ".concat(g(e)," transition-all duration-300"),style:{width:"".concat(e/10*100,"%")}})}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(y(e)),children:e})]}),f=e=>{let r=e.DefaultLevel,a="1"===e.NeedAllways,l="1"===e.AllowManager,n="1"===e.AllowCashier;return(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:border-blue-500/30 transition-colors",children:(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h5",{className:"text-base font-medium text-gray-900 mb-1",children:e.AuthorityText}),e.AuthorityDescription&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:e.AuthorityDescription}),(0,s.jsx)("div",{className:"mb-3",children:b(r)}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("select",{value:r,onChange:r=>t(e,"DefaultLevel",parseInt(r.target.value)),className:"\n                    px-3 py-1.5 rounded-lg text-sm font-medium border transition-colors\n                    ".concat(y(r)," border-gray-300 \n                    focus:ring-2 focus:ring-blue-500 focus:border-transparent\n                  "),children:[...Array(10)].map((e,t)=>(0,s.jsxs)("option",{value:t+1,children:["Seviye ",t+1]},t+1))}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:r=>t(e,"NeedAllways",r.target.checked?"1":"0"),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",id:"required-".concat(e.AuthorityID)}),(0,s.jsx)("label",{htmlFor:"required-".concat(e.AuthorityID),className:"text-sm text-gray-600",children:"Zorunlu (Her durumda şifre sorulsun)"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-lg",children:[(0,s.jsx)("input",{type:"checkbox",checked:l,onChange:r=>t(e,"AllowManager",r.target.checked?"1":"0"),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",id:"manager-".concat(e.AuthorityID)}),(0,s.jsx)("label",{htmlFor:"manager-".concat(e.AuthorityID),className:"text-sm text-gray-700",children:"M\xfcd\xfcr"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-lg",children:[(0,s.jsx)("input",{type:"checkbox",checked:n,onChange:r=>t(e,"AllowCashier",r.target.checked?"1":"0"),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",id:"cashier-".concat(e.AuthorityID)}),(0,s.jsx)("label",{htmlFor:"cashier-".concat(e.AuthorityID),className:"text-sm text-gray-700",children:"Kasiyer"})]})]})]})})})};if(o)return(0,s.jsx)("div",{className:"p-4 text-center",children:"Y\xfckleniyor..."});if(l.length>0)return(0,s.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,s.jsx)("div",{children:f(e)},e.AuthorityID))});let p=n[u]||[];return(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:(0,s.jsx)(i.Z,{size:20,className:"text-blue-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"G\xfcvenlik Ayarları"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Kullanıcı yetkilendirme ve g\xfcvenlik ayarlarını buradan y\xf6netebilirsiniz."})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:u}),(0,s.jsx)("div",{className:"space-y-3",children:p.length>0?p.map(e=>(0,s.jsx)("div",{children:f(e)},e.AuthorityID)):(0,s.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Bu grup i\xe7in g\xfcvenlik ayarı bulunamadı."})})]})]})};function o(){let[e,t]=(0,a.useState)("security"),[r,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[u,h]=(0,a.useState)([]),[x,m]=(0,a.useState)(""),[g,y]=(0,a.useState)([]),[b,f]=(0,a.useState)([]),[p,j]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),[w,A]=(0,a.useState)({security:{label:"G\xfcvenlik",subTabs:[]}});(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/user_security_settings.json"),t=await e.json(),r=Array.from(new Set(t.map(e=>e.GroupName)));h(r),r.length>0&&!x&&(m(r[0]),i(r[0].toLowerCase()));let s={security:{label:"G\xfcvenlik",subTabs:r.map(e=>({id:e.toLowerCase(),label:e}))}};A(s),y(t),f(t.filter(e=>e.GroupName===r[0])),j(!1)}catch(e){console.error("Error loading security settings:",e),j(!1)}})()},[]),(0,a.useEffect)(()=>{if(!o.trim()){N(!1),f(g.filter(e=>e.GroupName===x));return}N(!0);let e=o.toLowerCase();f(g.filter(t=>{let r=t.AuthorityText.toLowerCase().includes(e),s=!!t.AuthorityDescription&&t.AuthorityDescription.toLowerCase().includes(e),a=t.AuthorityKey.toLowerCase().includes(e);return r||s||a}))},[o,x,g]),(0,a.useEffect)(()=>{v||f(g.filter(e=>e.GroupName===x))},[x,g,v]);let k=(e,t,r)=>{y(s=>s.map(s=>s.AuthorityID===e.AuthorityID?{...s,[t]:r}:s))},S=v?b.reduce((e,t)=>(e[t.GroupName]||(e[t.GroupName]=[]),e[t.GroupName].push(t),e),{}):{[x]:b};return(0,s.jsx)("div",{className:"flex flex-col h-full bg-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-white border-r border-gray-200",children:(0,s.jsx)(l.Z,{tabs:w,activeMainTab:e,activeSubTab:r,onMainTabChange:e=>{t(e)},onSubTabChange:(e,r)=>{t(e),i(r);let s=u.find(e=>e.toLowerCase()===r.toLowerCase());s&&(m(s),d(""))},searchTerm:o,onSearch:e=>{d(e)}})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)("div",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"G\xfcvenlik Ayarları"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:v?'"'.concat(o,'" i\xe7in arama sonu\xe7ları (').concat(b.length," sonu\xe7)"):"Kullanıcı yetkilendirme ve g\xfcvenlik ayarlarını buradan y\xf6netebilirsiniz."}),p?(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 text-center",children:"Y\xfckleniyor..."}):0===b.length?(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 text-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Sonu\xe7 bulunamadı."})}):(0,s.jsx)(s.Fragment,{children:Object.entries(S).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:[(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:t})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(c,{onChange:k,items:r})})]},t)})})]})}),(0,s.jsx)("div",{className:"flex-none sticky bottom-0 left-0 right-0 z-10",children:(0,s.jsx)(n.Z,{onCancel:()=>{console.log("Settings cancelled")},onSave:()=>{console.log("Security settings saved:",g)}})})]})]})})}}},function(e){e.O(0,[2615,2971,8069,1744],function(){return e(e.s=9849)}),_N_E=e.O()}]);